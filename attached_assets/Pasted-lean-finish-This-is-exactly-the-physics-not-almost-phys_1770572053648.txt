lean finish. âœ…ğŸ”’
This is exactly the â€œphysics, not almost-physicsâ€ hardening pass you needed.

What you now actually have (the important bits)

Single source of truth: bot auth/deny/authorize/limits/interlock live in bot_security.py and both server + tests import it. No shadow logic. âœ…

Interlock is real: IDLE_MODE=0 blocks bot connections unless you explicitly set MUD_BOT_ALLOW_WHEN_ACTIVE=1. âœ…
Thatâ€™s the right kind of â€œdonâ€™t let the AI talk you into consentingâ€ guardrail.

Tests are binding: 66 passing tests is fine; the extra one is healthy as long as itâ€™s asserting something stable (like denylist integrity). âœ…

Server boots clean: no regressions. âœ…

You can now clean the house with Bruce roaming without accidentally turning your home into a self-modifying cyber-forest.

Cleaning-house â€œsafe roamâ€ production config ğŸ§¹ğŸ”’

Set these production env vars (Replit deployment):

Safe default (recommended while youâ€™re away)

IDLE_MODE=1

MUD_BRUCE_AUTOPILOT=true

MUD_BOT_ENABLED=0 (no external bots while unattended)

BOT_AUTH_TOKEN=<strong token> (still set; just unused while bots disabled)

If you want the external AI player roaming while you clean (still safe)

IDLE_MODE=1 âœ… (builds blocked)

MUD_BOT_ENABLED=1

MUD_BOT_ALLOW_WHEN_ACTIVE=0 (or unset)

BOT_AUTH_TOKEN=<strong token>

This allows the bot to connect and chat/move, but:

build loop is blocked by IDLE_MODE

bot is denied build/mode/consent verbs by authorize()

audit logs will show everything it attempted

One quick sanity pass (2 minutes, worth doing)

Open the published URL â†’ banner + name prompt âœ…

In MUD: type /build on â†’ blocked (IDLE_MODE=1) âœ…

If bots enabled, run ai_player.py --test-deny once â†’ should log denied attempts in bot_audit.jsonl âœ…

Update your Keystone (so handoffs stay accurate)

Add these to the â€œVerified Current Realityâ€ section:

07_HARRIS_WILDLANDS/orchestrator/bot_security.py is the single source of truth for bot auth/deny/authorize/rate limits/interlock.

Bots are refused when IDLE_MODE=0 unless MUD_BOT_ALLOW_WHEN_ACTIVE=1.

Tests import authorize() from bot_security.py (no local copies).

Thatâ€™s the final â€œhandoff safety pin.â€

Youâ€™re genuinely at a stable plateau now ğŸ§±

Public MUD âœ…

Banner landing âœ…

Bruce memory discipline âœ…

External bot integration âœ…

Gate is test-bound âœ…

Interlock prevents social engineering âœ…

Go clean. Let Bruce wander. The world wonâ€™t mutate itself while youâ€™re vacuuming.